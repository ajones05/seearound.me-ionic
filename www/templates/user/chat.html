<ion-view class="chat">
  <ion-nav-bar>
    <ion-nav-buttons side="left">
        <button ui-sref="app.usermessages" class="button button-clear">
          <i class="icon ion-ios-arrow-left"></i>
        </button>
    </ion-nav-buttons>
    <ion-nav-buttons side="right">
      <label class="row user">
        <span>{{other_user.name}}</span>
        <img
         class="profile_image"
         ng-src=" {{other_user.profile_image}} ">
      </label>
    </ion-nav-buttons>
  </ion-nav-bar>

  <ion-content class="chat_msgs padding">
    <div ng-repeat='m in messages track by m.id'>
      <div
        class="date"
        ng-bind="m.formatted_date"></div>
      <div
        class="bubble bubble-left"
        ng-if="!(m.sender_id == Self.id)">
        {{m.message}}
      </div>
      <div
        class="bubble bubble-right"
        style="float:right;"
        ng-if="m.sender_id == Self.id">
        {{m.message}}
      </div>
      <br/>
    </div>

  </ion-content>

  <ion-footer-bar keyboard-attach class="row">
    <input
      type="text" 
      class="col" 
      ng-model="newMessage.text"
      placeholder="New Message.."
    />
    <div 
      ng-click='sendMessage()'
      class="col col-20 button button-positive"
      >
      Send
    </div>
  </ion-footer-bar>
</ion-view>

<ion-modal-view  ng-style="viewStyle" on-swipe-up="showFullView(post)">
    
  <ion-pane ng-show="!showMapModalBar" class="mapmodal" style="width:100%;" on-swipe-down="hideModal()">

    <!--div class="row" ng-click="hideModal()"></div -->

    <div class="post_item">
      <div class="row user">
        <div class="col col-20 avatar">
          <img ng-src="{{post.Profile_image}}" alt="" ng-click="goToUser(post)">
        </div>
        <div class="col"> 
          <div class="name">
            <span>{{post.Name}}</span>
            <div class="date right">
              <div> {{post.created_date}} </div>
            </div>
          </div>
            <!-- p class="desc">{{post.news}}</p -->
            <p class="desc" ng-bind-html="post.news | linky | hrefToJS"></p>
        </div>
      </div>
      <img ng-src="{{post.thumb}}" class="post-iamge" ng-if="post.thumb" alt=""/>
        <div class="item" style="padding-top:0;" ng-if="post.link_url" ng-click="openLink(post.link_url)">
            <div class="item-body">
              <img class="full-image" ng-src={{post.link_image}} ng-if="post.link_image" alt="">
              <div class="post-link">
                  <h3 class="link-title">{{post.link_title}}</h3>
                  <span class="link-text">{{post.link_description}}</span>
              </div>
            </div>
        </div>        
      <div class="share row">
        <span class="col col-20 chat-bubble" ng-click="goToComments(post)">
          {{post.comment_count}}
          <img src="img/chat.png" alt="">
        </span>
          <post-like-box></post-like-box>
        <span class="col" ng-click='openShare(post.id)'> Share</span>
      </div>

      <div class="comments" ng-if="postComments" style="background:white">
      <hr/>
        <div class="row user" 
          style="border-bottom: 1px solid lightgray; padding-bottom: 5px;"
          ng-repeat="comment in postComments">
          <div class="col col-20 avatar"
            ng-click="goToProfile(comment.user_id)"
            >
            <img ng-src="{{comment.Profile_image}}" alt="profile image">
          </div>
          <div class="col"> 
            <div class="name">
              <span>{{comment.user_name}}</span>
              <div class=" date right">
                <div>{{comment.commTimeAgo}}</div>
              </div>
            </div>
            <div class="desc">{{comment.comment}}</div>
          </div>
          <!-- <div style="width:20px;padding:5px"> -->
            <!--   <a class="icon ion&#45;ios&#45;location&#45;outline" style="font&#45;size:1.3em;"></a> -->
            <!-- </div>                         -->
        </div>
      </div>
    </div>
  </ion-pane>
  <ion-view ng-show="showMapModalBar" class="mapmodal">
      <div class="bar bar-header modal_header row">
          <div class="left col col-20" ng-click="hideModal()">
              <i class="icon ion-close"></i>
          </div>
          <div class="col col-50"></div>
          <div class="right col col-30">
              <i ng-click="move('up', post)" class="icon ion-chevron-up" style="height:40px;"></i>
              &nbsp;&nbsp;
              <i ng-click="move('down', post)" class="icon ion-chevron-down" style="height:40px;"></i>
          </div>
      </div>
      
    <ion-content scroll="true" style="margin-top:64px;">

      <div class="post_item" ng-class="viewMode">
        <div class="row user" on-swipe-down="hideModal()">
          <div class="col col-20 avatar">
            <img ng-src="{{post.Profile_image}}" alt="" ng-click="goToUser(post)">
          </div>
          <div class="col"> 
            <div class="name">
              <span>{{post.Name}}</span>
              <div class="date right">
                <div> {{post.created_date}} </div>
              </div>
            </div>
              <p class="desc">{{post.news}}</p>
          </div>
          <div ng-click="showMapForPost(post)"
            style="width:20px;margin-top:5px;">
            <a class="icon ion-ios-location-outline" style="font-size:1.3em;"></a>
          </div>
        </div>
        <img ng-src="{{post.thumb}}" class="post-iamge" on-swipe-down="hideModal()" ng-click="showImage(post.image)" ng-if="post.thumb" alt=""/>
        <div class="item" style="padding-top:0;" ng-if="post.link_url" on-swipe-down="hideModal()" ng-click="openLink(post.link_url)">
            <div class="item-body">
              <img class="full-image" ng-src={{post.link_image}} ng-if="post.link_image" alt="">
              <div class="post-link">
                  <h3 class="link-title">{{post.link_title}}</h3>
                  <span class="link-text">{{post.link_description}}</span>
              </div>
            </div>
        </div>
        <div class="share row" style="background:white">
          <span class="col col-20 chat-bubble" ng-click="focusInput()">
            {{post.comment_count}}
            <img src="img/chat.png" alt="">
          </span>
            <post-like-box></post-like-box>
            <post-edit ng-if="post.canEdit" post="post" from="map"></post-edit>
          <span class="col" ng-click='openShare(post.id)'> Share</span>
        </div>        
   </div>
    <ion-list class="comments" ng-if="postComments">
        <div class="item" ng-if="hasMore" ng-click="loadMore()">
            <p>See more comments</p>
        </div>        
        <ion-item class="item-avatar item-text-wrap user"  ng-repeat="comment in postComments">
            <img ng-src="{{comment.Profile_image}}" alt="profile image" ng-click="goToUser(comment)">
                <div class="name">
                    <span>{{comment.user_name}}</span>
                    <div class=" date right">
                        <div>{{comment.commTimeAgo}}</div>
                    </div>
                </div>
                <p class="desc" ng-bind-html="comment.comment | linky | hrefToJS"></p>
                <!--div class="desc">{{comment.comment}}</div-->
                
                <!-- <div style="width:20px;padding:5px"> -->
                <!--   <a class="icon ion&#45;ios&#45;location&#45;outline" style="font&#45;size:1.3em;"></a> -->
                <!-- </div> -->
                <ion-option-button class="button-assertive" ng-if="comment.canEdit" ng-click="delComment(comment)">
                    Delete
                </ion-option-button>
        </ion-item>
    </ion-list>
        <div class="write-comment row">
          <input id="commInput" type="text" class="col" ng-model="newComment.text" placeholder="Write a comment..">
          <div ng-click="postComment()" class="button button-small button-positive col col-20">
            Post
            </div>
        </div>                  
  </ion-content>
  </ion-view>
</ion-modal-view>

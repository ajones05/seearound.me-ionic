<ion-modal-view class="postlistview" style="background:transparent;width:100%">

  <ion-pane ng-show="!showMapModalBar" class="vbox" style="background:transparent;width:100%; z-index:0">

    <div class="row" ng-click="hideModal()"></div>

    <div class="post_item" on-swipe-up="showFullView(post)" on-swipe-down="hideModal()" ng-class="viewMode">
      <div class="row user">
        <div class="col col-20 avatar">
          <img ng-src="{{post.Profile_image}}" alt="" ng-click="goToUser(post)">
        </div>
        <div class="col"> 
          <div class="name">
            <span>{{post.Name}}</span>
            <div class="date right">
              <div> {{post.timeAgo}} </div>
            </div>
          </div>
            <p class="desc">{{post.news}}</p>       
        </div>
      </div>
      <img ng-src="{{post.images}}" class="post-iamge" ng-if="post.images" alt=""/>
      <div class="share row">
        <span class="col col-20 chat-bubble" ng-click="goToComments(post)">
          {{post.comment_count}}
          <img src="img/chat.png" alt="">
        </span>
          <post-like-box></post-like-box>
        <span class="col" ng-click='openShare(post.news, post.first_link)'> Share</span>
      </div>

      <div class="comments" ng-if="postComments" style="background:white">
      <hr/>
        <div class="row user" 
          style="border-bottom: 1px solid lightgray; padding-bottom: 5px;"
          ng-repeat="comment in postComments">
          <div class="col col-20 avatar"
            ng-click="goToProfile(comment.user_id)"
            >
            <img ng-src="{{comment.Profile_image}}" alt="profile image">
          </div>
          <div class="col"> 
            <div class="name">
              <span>{{comment.user_name}}</span>
              <div class=" date right">
                <div>{{comment.timeAgo}}</div>
              </div>
            </div>
            <div class="desc">{{comment.comment}}</div>
          </div>
          <!-- <div style="width:20px;padding:5px"> -->
            <!--   <a class="icon ion&#45;ios&#45;location&#45;outline" style="font&#45;size:1.3em;"></a> -->
            <!-- </div>                         -->
        </div>
      </div>
    </div>
  </ion-pane>
  <ion-view ng-show="showMapModalBar" class="postlistview">
      <div class="bar bar-header modal_header row">
          <div class="left col col-20" ng-click="hideModal()">
              <i class="icon ion-close"></i>
          </div>
          <div class="col col-50"></div>
          <div class="right col col-30">
              <i ng-click="swipe('right', post)" class="icon ion-chevron-up" style="height:40px;"></i>
              &nbsp;&nbsp;
              <i ng-click="swipe('left', post)" class="icon ion-chevron-down" style="height:40px;"></i>
          </div>
      </div>
      
    <ion-content scroll="true" style="margin-top:64px;">

      <div class="post_item" ng-class="viewMode">
        <div class="row user">
          <div class="col col-20 avatar">
            <img ng-src="{{post.Profile_image}}" alt="" ng-click="goToUser(post)">
          </div>
          <div class="col"> 
            <div class="name">
              <span>{{post.Name}}</span>
              <div class="date right">
                <div> {{post.timeAgo}} </div>
              </div>
            </div>
              <p class="desc">{{post.news}}</p>
          </div>
          <div ng-click="showMapForPost(post.latitude, post.longitude)"
            style="width:20px;margin-top:5px;">
            <a class="icon ion-ios-location-outline" style="font-size:1.3em;"></a>
          </div>
        </div>
        <img ng-src="{{post.images}}" class="post-iamge" ng-if="post.images" alt=""/>
        <div class="item" ng-if="post.link_url" ng-click="openLink(post.link_url)">
            <div class="item-body">
              <img class="full-image" ng-src={{post.link_image}} ng-if="post.link_image" alt="">
              <div class="post-link">
                  <h3 class="link-title">{{post.link_title}}</h3>
                  <span class="link-text">{{post.link_description}}</span>
              </div>
            </div>
        </div>
        <div class="share row" style="background:white">
          <span class="col col-20 chat-bubble" ng-click="goToComments(post)">
            {{post.comment_count}}
            <img src="img/chat.png" alt="">
          </span>
            <post-like-box></post-like-box>
          <span class="col" ng-click='openShare(post.news, post.link_url)'> Share</span>
        </div>
        <hr/>

        <div class="comments"
          ng-if="postComments"
          style="background:white; padding-bottom: 100px">
          <div class="row user" 
            style="border-bottom: 1px solid lightgray; padding-bottom: 5px;"
            ng-repeat="comment in postComments">
            <div class="col col-20 avatar"
              ng-click="goToProfile(comment.user_id)"
              >
              <img ng-src="{{comment.Profile_image}}" alt="profile image">
            </div>
            <div class="col"> 
              <div class="name">
                <span>{{comment.user_name}}</span>
                <div class=" date right">
                  <div>{{comment.timeAgo}}</div>
                </div>
              </div>
              <div class="desc">{{comment.comment}}</div>
            </div>
            <!-- <div style="width:20px;padding:5px"> -->
              <!--   <a class="icon ion&#45;ios&#45;location&#45;outline" style="font&#45;size:1.3em;"></a> -->
              <!-- </div>                         -->
          </div>
        </div>
        <div class="write-comment row">
          <input type="text" class="col" ng-model="commentText" placeholder="Write a comment..">
          <div ng-click="postComment(commentText)" class="button button-small button-positive col col-20">
            Post
            </div>
        </div>                  
      </div>
    </ion-content>
  </ion-view>
</ion-modal-view>

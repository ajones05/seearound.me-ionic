<ion-view hide-nav-bar="true" hide-back-button="true" class="postlistview">
    <div class="bar bar-header bar-positive">
        <div class="row" style="padding-top:10px;width:100%;">
            <button menu-toggle="left" class="button button-icon" style="padding-bottom:0;padding-left:0;padding-top:4px;width:40px;margin-right:10px;">
                <img src="img/menu_off.png" height="20"/>
                <p class="icon-label">Menu</p>
            </button>
            <button class="col button button-icon" ng-click="goToNewPost()" style="padding-top:4px;padding-bottom:0;margin-right:6px;">
                <img src="img/newpost_off.png" height="22"/>
                <p style="margin-left:-4px;" class="icon-label">Post</p>
            </button>
            <button class="col button button-icon" ng-click="showAlerts($event)" style="padding-top:4px;padding-bottom:0;">
                <img src="img/alerts_off.png" height="22"/>
                <span ng-if="unreadAlerts > 0" class="alert-badge">{{unreadAlerts}}</span>
                <p class="icon-label">Alerts</p>
            </button>
            <button class="col button button-icon" ng-click="toggleSearch()" style="padding-top:4px;padding-bottom:0;margin-right:-4px;">
                <img ng-show="!isFiltered" src="img/search_off.png" height="22"/>
                <img ng-show="isFiltered" src="img/search_on.png" height="22"/>
                <p class="icon-label">Search</p>
            </button>
            <button class="button button-icon" ui-sref="app.postmapview" style="width:64px;padding-right:0;padding-top:4px;padding-bottom:0;margin-right:-6px;">
              <img src="img/map_off.png" height="22"/>
                <p class="icon-label">Map View</p>
            </button>
        </div>
    </div>
    <div class="row bar bar-subheader" style="background:#eee;" ng-show="showSearch">
        <div class="col" style="margin-left:-5px;">
            <div class="row" style="border:2px solid #ddd;height:100%;background:#fff;">
        <i class="icon ion-ios-search" style="font-size:1.4em;padding-right:10px;margin:0;"></i>
                <input type="text" name="searchTerm" ng-model="searchTerm" placeholder="Search ..." style="width:100%;height:100%;background:#fff;">
            </div>
         </div>
        <div style="margin-right:5px;width:100px;">    
            <div class="item item-icon-right" style="border:2px solid #ddd;" ng-click="showSelect($event)">
                <label class="post-select">
                  Filter
                  <i style="margin-right:-10px;font-size:1.5em;" class="icon ion-ios-arrow-down"></i>
                </label>             
            </div>
        </div>
        <div class="col-20">            
          <button class="button button-block button-positive" ng-show="!isFiltered" ng-click="searchPosts()">Go</button>
          <button class="button button-block button-positive" ng-show="isFiltered" ng-click="clearSearch()">Cancel</button>
        </div>
    </div>          
  <ion-content padding="false" class="has-header" id="eventPlaceholder">
      
    <div class="post_item" ng-repeat='post in nearbyPosts track by $index'>
      <div class="row user">
        <div class="col col-90"> 
            <p class="desc" ng-bind-html="post.news | linky | hrefToJS | hashtag"></p>
        </div>
        <div ng-click="showMapForPost(post)" class="col col-10" style="width:20px;padding-top:1%">
          <a class="icon ion-ios-location-outline" style="font-size:1.3em;"></a>
        </div>
      </div>
      <img ng-if="post.thumb" class="post-iamge" ng-src={{post.thumb}} ng-click="showImage(post.image)" alt="">
        <div class="item" style="padding-top:0;" ng-if="post.link_url" on-swipe="onListSwipe()" on-tap="openLink(post.link_url)">
            <div class="item-body">
              <img class="full-image" ng-src={{post.link_image}} ng-if="post.link_image" alt="">
              <div class="post-link">
                  <h3 class="link-title">{{post.link_title}}</h3>
                  <span class="link-text">{{post.link_description}}</span>
              </div>
            </div>
        </div>
      <div class="share row">
        <post-like-box></post-like-box>
        <span class="text-comm" ng-if="post.comment_count > 0" ng-click="goToComments(post)">
            {{post.comment_count}} Comments
        </span>
        <span class="text-comm" ng-if="post.comment_count == 0" ng-click="goToComments(post)">
            Comment
        </span>
        <div class="post-by">
            <div class="row text-gray">
                <div class="date">
                  {{post.created_date}} by 
                </div>
                <div ng-click="goToProfile(post.user_id)" class="user-name">{{post.Name}}</div>
            </div>
        </div>
        <post-actions post="post" from="list"></post-actions>
      </div>
    </div>      
      <ion-infinite-scroll ng-if="hasMore" distance="1%" on-infinite="loadMore()">
    </ion-infinite-scroll>
  </ion-content>
</ion-view>

<ion-view hide-back-button="true" class="postlistview">
  <ion-nav-buttons>
    <div class="row bar bar-header" id="nav-bar" >
      <div class="header-buttons">
        <button menu-toggle="left" class="button button-icon">
          <img src="img/menu_off.png" height="22"/>
        </button>
        <button class="button button-icon" ui-sref="newpostview">
          <img src="img/newpost_off.png" height="24"/>
        </button>
        <button class="button button-icon" ng-click="showAlerts($event)" >
          <img src="img/alerts_off.png" height="24"/>
        </button>
        <button class="button button-icon" ng-click="toggleSearch()">
          <img src="img/search_off.png" height="24"/>
        </button>
        <button class="button button-icon" ui-sref="app.postmapview">
          <img src="img/map_off.png" height="28"/>
        </button>

      </div>
    </div>
  </ion-nav-buttons>
    <div class="row bar bar-subheader" style="background:#eee;" ng-show="showSearch">
        <div class="col" style="margin-left:-5px;">
            <div class="row" style="border:2px solid #ddd;height:100%;background:#fff;">
                <i class="icon ion-ios-search" style="font-size:1.4em;padding-right:10px;margin:0;"></i>
                <input type="text" name="searchTerm" ng-model="searchTerm" placeholder="Search ..." style="height:100%;background:#fff;">
            </div>
         </div>
        <div style="margin-right:5px;width:100px;">    
            <div class="item item-icon-right" style="border:2px solid #ddd;" ng-click="showSelect($event)">
                <label class="post-select">
                  {{selected.label}}
                  <i style="margin-right:-10px;font-size:1.5em;" class="icon ion-ios-arrow-down"></i>
                </label>             
            </div>
        </div>
        <div class="col-20">            
          <button class="button button-block button-positive" ng-show="!isFiltered" ng-click="searchPosts()">Go</button>
          <button class="button button-block button-positive" ng-show="isFiltered" ng-click="clearSearch()">Cancel</button>
        </div>
    </div>          
  <ion-content padding="false">
      
    <div class="post_item" ng-repeat='post in nearbyPosts track by $index' >
      <div class="row user">
        <div class="col col-20 avatar"
          ng-click="goToProfile(post.user_id)"
          >
          <img ng-src={{post.Profile_image}}>
        </div>
        <div class="col"> 
          <div class="name">
            <span>{{post.Name}}</span>
            <div class="date">
              {{post.timeAgo}}
            </div>
          </div>
          <p class="desc" ng-bind-html="post.news | linky | hrefToJS"></p>
        </div>
        <div 
          ng-click="showMapForPost(post.latitude, post.longitude)"
          style="width:20px;padding-top:1%">
          <a class="icon ion-ios-location-outline" style="font-size:1.3em;"></a>
        </div>
      </div>
      <img ng-if="post.images" style="min-height:100px; background: lightgray" ng-src={{post.images}} alt="">
      <div class="share row">
        <span class="col col-20 chat-bubble" ng-click="goToComments(post)">
          {{post.comment_count}}
          <img src="img/chat.png" alt="">
        </span>
        <post-like-box></post-like-box>
        <span class="col" ng-click='openShare(post.news, post.first_link)'> Share</span>
      </div>
    </div>

  </ion-content>
</ion-view>
